{% set name = "coredns" %}
{% set go_pkg_name = "github.com/coredns/" + name %}
{% set version = "1.8.6" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/coredns/{{ name }}/archive/v{{ version }}.tar.gz
  sha256: cbe3764afe2148b8047ea7e5cbba5108c298dee3a9a0391028e2980e35beaa2b

build:
  number: 0
  script:
    - go install -v -ldflags "-s -w" .

requirements:
  build:
    - {{ compiler('go') }} 1.13

test:
  commands:
    - coredns -version

about:
  home: https://coredns.io/
  license: Apache-2.0
  license_file: LICENSE
  license_family: Apache
  summary: CoreDNS is a DNS server written in Go that chains plugins
  doc_url: https://coredns.io/manual/toc/
  dev_url: https://github.com/coredns/coredns

extra:
  recipe-maintainers:
    - sodre
